!function(){function t(){4==this.readyState&&200==this.status&&(a.open("GET","/board"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);for(var e in t)document.getElementById(e).innerHTML=t[e]}})}for(var e=document.querySelectorAll("input"),n=document.forms[0],a=new XMLHttpRequest,o=0;o<e.length;o++){var s=e[o];s.addEventListener("dragover",function(t){this.checked=!0,t.preventDefault()}),s.addEventListener("drop",function(t){t.preventDefault();var e=t.dataTransfer.getData("card"),a=document.getElementsByClassName(e)[0];n.dataset.button=a.value,a.click()})}document.addEventListener("dragstart",function(t){"BUTTON"===t.target.nodeName&&t.dataTransfer.setData("card",t.target.className)}),document.addEventListener("click",function(t){if("BUTTON"===t.target.nodeName||"BUTTON"===t.target.parentNode.nodeName){var e="BUTTON"===t.target.nodeName?t.target:t.target.parentNode;console.log(e),n.dataset.button=e.value}if("undefined"!=typeof t.target.dataset.show){var a=document.getElementById(t.target.dataset.show).outerHTML,o=document.getElementById("overlay");"shown"==o.className?(o.className="",o.innerHTML=""):(o.innerHTML=a,o.className="shown"),t.preventDefault()}"overlay"===t.target.id&&(t.target.className="")}),n.addEventListener("submit",function(e){var o=document.querySelector("input:checked").value;a.onreadystatechange=t,a.open("POST","/gameplay"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send("action="+o+"&card="+n.dataset.button),console.log(n.dataset.button),console.log(o),e.preventDefault()});var i=function(t){var e={addEvent:function(t,e,n,a){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event,a)},t.attachEvent("on"+e,t[e+n]))},input:"",pattern:"38384040373937396665",load:function(t){this.addEvent(document,"keydown",function(n,a){if(a&&(e=a),e.input+=n?n.keyCode:event.keyCode,e.input.length>e.pattern.length&&(e.input=e.input.substr(e.input.length-e.pattern.length)),e.input==e.pattern)return e.code(t),e.input="",n.preventDefault(),!1},this),this.iphone.load(t)},code:function(t){window.location=t},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],code:function(t){e.code(t)},load:function(t){this.orig_keys=this.keys,e.addEvent(document,"touchmove",function(t){if(1==t.touches.length&&1==e.iphone.capture){var n=t.touches[0];e.iphone.stop_x=n.pageX,e.iphone.stop_y=n.pageY,e.iphone.tap=!1,e.iphone.capture=!1,e.iphone.check_direction()}}),e.addEvent(document,"touchend",function(n){1==e.iphone.tap&&e.iphone.check_direction(t)},!1),e.addEvent(document,"touchstart",function(t){e.iphone.start_x=t.changedTouches[0].pageX,e.iphone.start_y=t.changedTouches[0].pageY,e.iphone.tap=!0,e.iphone.capture=!0})},check_direction:function(t){x_magnitude=Math.abs(this.start_x-this.stop_x),y_magnitude=Math.abs(this.start_y-this.stop_y),x=this.start_x-this.stop_x<0?"RIGHT":"LEFT",y=this.start_y-this.stop_y<0?"DOWN":"UP",result=x_magnitude>y_magnitude?x:y,result=1==this.tap?"TAP":result,result==this.keys[0]&&(this.keys=this.keys.slice(1,this.keys.length)),0==this.keys.length&&(this.keys=this.orig_keys,this.code(t))}}};return"string"==typeof t&&e.load(t),"function"==typeof t&&(e.code=t,e.load()),e};new i(function(){for(var t=document.querySelectorAll("#hand-player .card"),e=0;e<t.length;e++)t[e].className+=" color-known-true number-known-true"})}();