!function(){function e(){4==this.readyState&&200==this.status&&(o.open("GET","/board"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(),o.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);for(var n in e)var a=document.getElementById(n);t(e["player-move-description"]),t(e["computer-move-description"]),document.getElementById("notification").style.zIndex=1,document.getElementById("notification").innerHTML=e["player-move-description"]+"<hr>"+e["computer-move-description"],document.getElementById("notification").className="show",setTimeout(function(){document.getElementById("notification").style.zIndex=1,document.getElementById("notification").className=""},1800)}})}function t(e){if("undefined"!=typeof SpeechSynthesisUtterance){u=new SpeechSynthesisUtterance,u.onend=function(){};var t=window.speechSynthesis;return u.text=e,t.speak(u),!0}return!1}for(var n=document.querySelectorAll("input"),a=document.forms[0],o=new XMLHttpRequest,s=document.getElementById("overlay"),i=document.getElementById("overlay-text"),r=0;r<n.length;r++){var d=n[r];d.addEventListener("dragover",function(e){this.checked=!0,e.preventDefault()}),d.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.getData("card"),n=document.getElementsByClassName(t)[0];a.dataset.button=n.value,n.click()})}document.addEventListener("dragstart",function(e){"BUTTON"===e.target.nodeName&&e.dataTransfer.setData("card",e.target.className)}),document.addEventListener("click",function(e){if("BUTTON"===e.target.nodeName||"BUTTON"===e.target.parentNode.nodeName){var n="BUTTON"===e.target.nodeName?e.target:e.target.parentNode;a.dataset.button=n.value,a.dataset.color=n.className.match(/color\-(red|white|blue|green|yellow)/)[1],a.dataset.number=n.className.match(/number\-([1-5])/)[1]}if("undefined"!=typeof e.target.dataset.show){var o=document.getElementById(e.target.dataset.show).outerHTML;"shown"==s.className?(s.className="",i.innerHTML=""):(i.innerHTML=o,s.className="shown"),e.preventDefault()}"overlay"!==e.target.id&&"overlay-dismiss"!==e.target.className||(s.className="",e.preventDefault()),"overlay-read"===e.target.className&&(t(i.innerText),e.preventDefault())}),a.addEventListener("submit",function(t){var n=document.querySelector("input:checked").value;a.dataset.color,a.dataset.number;o.onreadystatechange=e,o.open("POST","/gameplay"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("action="+n+"&card="+a.dataset.button),t.preventDefault()});var c=function(e){var t={addEvent:function(e,t,n,a){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event,a)},e.attachEvent("on"+t,e[t+n]))},input:"",pattern:"38384040373937396665",load:function(e){this.addEvent(document,"keydown",function(n,a){if(a&&(t=a),t.input+=n?n.keyCode:event.keyCode,t.input.length>t.pattern.length&&(t.input=t.input.substr(t.input.length-t.pattern.length)),t.input==t.pattern)return t.code(e),t.input="",n.preventDefault(),!1},this),this.iphone.load(e)},code:function(e){window.location=e},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],code:function(e){t.code(e)},load:function(e){this.orig_keys=this.keys,t.addEvent(document,"touchmove",function(e){if(1==e.touches.length&&1==t.iphone.capture){var n=e.touches[0];t.iphone.stop_x=n.pageX,t.iphone.stop_y=n.pageY,t.iphone.tap=!1,t.iphone.capture=!1,t.iphone.check_direction()}}),t.addEvent(document,"touchend",function(n){1==t.iphone.tap&&t.iphone.check_direction(e)},!1),t.addEvent(document,"touchstart",function(e){t.iphone.start_x=e.changedTouches[0].pageX,t.iphone.start_y=e.changedTouches[0].pageY,t.iphone.tap=!0,t.iphone.capture=!0})},check_direction:function(e){x_magnitude=Math.abs(this.start_x-this.stop_x),y_magnitude=Math.abs(this.start_y-this.stop_y),x=this.start_x-this.stop_x<0?"RIGHT":"LEFT",y=this.start_y-this.stop_y<0?"DOWN":"UP",result=x_magnitude>y_magnitude?x:y,result=1==this.tap?"TAP":result,result==this.keys[0]&&(this.keys=this.keys.slice(1,this.keys.length)),0==this.keys.length&&(this.keys=this.orig_keys,this.code(e))}}};return"string"==typeof e&&t.load(e),"function"==typeof e&&(t.code=e,t.load()),t};new c(function(){for(var e=document.querySelectorAll("#hand-player .card"),t=0;t<e.length;t++)e[t].className+=" color-known-true number-known-true"});document.addEventListener("keydown",function(e){27===e.keyCode&&(s.className="")});var u=!1;"undefined"!=typeof SpeechSynthesisUtterance&&(document.querySelector(".overlay-read").className="overlay-read")}();