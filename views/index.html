{% extends 'layout.html' %}

{% block content %}

<div class="container">
  
  <h1 id="title">{{ title }}</h1>
  
  {% if gameState.gameFinished %}
    
    <h1>The game has come to an end!</h1>
    <p>
      Your score: {{ gameState.score }} out of a possible 25.
    </p>
    <p>
      <a href="/gameplay/reset">Play again?</a>
    </p>

  {% else %}
      
  <form action='/gameplay' method='post'>
    <div id="hand-computer" class="hand">
    {% for card in gameState.computer %}
      <button name='card' value='{{ loop.index0 }},computer' class='computer-card card color-known-{{ card.isColorKnown }} number-known-{{ card.isNumberKnown }} color-{{ card.color }} number-{{ card.number }}'>
        ðŸ‘½
        <div class="info">
          <span class="info-color">ðŸŽ¨</span>  
          <span class="info-number">ðŸ”¢</span>  
          <span class='sr-only'>Is the color known? {{ card.isColorKnown }}</span>
          <span class='sr-only'>Is the number known? {{ card.isNumberKnown }}</span>
        </div>  
      </button>
    {% endfor %}
    </div>
    
    
    <div class='label-container'>
      <label for='play1'><input type="radio" id="play1" name="action" value='tellColor'> Tell about color</label>
      <label for='play2'><input type="radio" id="play2" name="action" value='tellNumber'> Tell about number</label>
    </div>

    <hr>
    
    <h2>Played</h2>
    
    <ul>
    {% for color,cards in gameState.played %}
      <li>{{ color }}
        <ul>
          {% for card in cards %}
          <li>{{ card.color }} {{ card.number }}</li>
          {% endfor %}
        </ul>
      </li>      
    {% endfor %}
    </ul>
    
    <ul id="deck">
      {% for card in gameState.deck %}
      <li class='card cardback stars'></li>
      {% endfor %}
    </ul>
    
    <hr>
    
    <div class='label-container'>
      <label for='play3'><input type="radio" id="play3" name="action" value='discard'> Discard a card</label>
      <label for='play4'><input type="radio" id="play4" name="action" value='play' checked> Play a card</label>
    </div>

    <div id="hand-player" class="hand">
    {% for card in gameState.player %}
      <button name='card' value='{{ loop.index0 }},player' class='player-card card color-known-{{ card.isColorKnown }} number-known-{{ card.isNumberKnown }} color-{{ card.color }} number-{{ card.number }}'>
        ðŸ“¡
        <div class="info">
          <span class="info-color">ðŸŽ¨</span>  
          <span class="info-number">ðŸ”¢</span>  
          <span class='sr-only'>Is the color known? {{ card.isColorKnown }}</span>
          <span class='sr-only'>Is the number known? {{ card.isNumberKnown }}</span>
        </div>  
      </button>
      </button>
    {% endfor %}
    </div>
    
  </form>
  
  <h2>Discard Pile</h2>
  
  <ul>
    {% for card in gameState.discard %}
      <li class='card'>
        {{ card.color }} {{ card.number }}
      </li>  
    {% endfor %}  
  </ul>
  
  <h2>Game Log</h2>
  
  <ol>
    {% for action in gameState.log %}
    <li>{{ action }}</li>
    {% endfor %}
  </ol>
  

{% endif %}

</div>  
  
{% endblock %}
